#+TITLE: Test Isometric Tiles
* Tiles
#+BEGIN_HTML :var map=map
<div class="map">
 {{#each map}}
   <div class="row {{#if_even @index}} even{{/if_even}}">
     {{#each this}}<div class="{{this}}-sprite iso" data-coords="{{@index}} {{@../index}}"></div>{{/each}}
   </div>
 {{/each}}
</div>
#+END_HTML

#+NAME: map
#+BEGIN_SRC yaml
- bbsbssbbbssbbb
- sssbbsbsbsbbs
- ssssssssssssss
- bbbbbbbbbbbbbbb
- ssssssssssssss
- sbbbbbb
#+END_SRC

#+BEGIN_SRC coffee :results def
Leisure.Handlebars.registerHelper 'if_even', (conditional, options)->
  if (conditional % 2) == 0 then options.fn(this) else options.inverse(this)
#+END_SRC

#+BEGIN_SRC css
.map {
  margin-top: 3em;
}
.row {
  height: 10px;
}
.even {
  padding-left: 20px;
}
.iso {
  display: inline-block;
  width: 40px;
  height: 40px;
}
#+END_SRC

Make sprites here. We can improve this later, putting all the sprites into on
image, etc.

#+BEGIN_SRC coffee :results def
#$(document.head).append("")
for i in "sb"
  do (i)-> Lounge.data.getFile "images/#{i}-iso.png", (contents)->
    $(document.head).append """
      <style>
        .#{i}-sprite {
          background: url(data:image/png;base64,#{btoa contents}) no-repeat bottom
        }
      </style>
    """
#+END_SRC
